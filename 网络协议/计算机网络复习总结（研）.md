# [计算机网络复习总结（研）](https://www.cnblogs.com/wkfvawl/p/postgraduate-computer-networks.html)

**1****、****对比分析计算机****网络、****分布式系统****、****主机系统的差异。**

差异：

- 计算机网络是由**物理**上独立的多台**自主计算机**的互联系统；用户必须指定网络中哪一台计算机完成什么样的操作。
- 分布式系统由一个操作系统**统一管理**，对用户来说，具有高度的**整体性**和**透明性**，是**虚拟计算机**，可能是多台计算机的**有机组合**；用户向虚拟系统递交一个任务后，由操作系统来安排任务的完成；
- 主机系统是由**主机**、**终端**、**磁盘机**、**外设处理机**、**前端处理机**、**磁带机**等组成的系统。

**2、\**分别画出ISO/OSI参考模型、TPC/IP 参考模型、课程中的参考模型\**\**，并说明\**\**ISO/OSI参考模型\**\**每一层的主要功能。\****

**![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211216141542092-427104740.png)**

**物理层**：定义接口的**机械**特性、**电气**特性、**功能**和**过程**特性，完成**传输媒体的信号**与**二进制数据**间的转换。

**数据链路层**：提供**点到点**的可靠传输，通常把**数据分帧**，并且保证帧的正确接收。

**网络层**：**选择路由**、**拥塞控制**、**协议的转换**、**分段**和**重组**等。

**运输层：**负责向两个**主机中进程**之间的通信提供通用的数据传输服务。

**会话层**: 允许不同机器上的用户之间建立有关会话的机制。

**表示层**：表示层关心的是**语法**和**语义**，定义一种标准的编码方法，用来表达网络线路上所传递的数据。

**应用层**：通过**应用进程间**的交互来完成特定网络应用。

**3、简述PCM的理论基础，试问为什么PCM采样时间被设置为125微秒？**

> **[脉冲编码调制](https://baike.baidu.com/item/脉冲编码调制/5143788)(Pulse Code Modulation,PCM)**

PCM以采样定 理为基础，**采样定理**：如果在规定的时间间隔内，**以有效信号f(t)最高频率的二倍或二倍以上的速率对该信号进行采样**，**则这些采样值中包含了全部原始信号信息**。

采样时间125us，所以每秒8000次采样。一个典型的电话信道的带宽为**4KHz**，根据奈奎斯特Nyquist定理为获得在一个4KHz信道上的全部信息需要每秒8000次的采样频率，所以采样周期为1/8000=125us。

**4、从通信双方信息交互方式看**

（1）**单向通信（单工通信）**：即只能有一个方向的通信而没有反方向的交互。如**广播**、**电视**。

（2）**双向交替通信（半双工通信）**：双方都可以发送或接受，但不能同时，即当一方发送时，另一方接收。如**对讲机**。

（3）**双向同时通信（全双工通信）**：双方可以同时发送和接收信息。如电话。

**5、分析同步通信与异步通信的差异。**

（1）**异步通信**是指发送方和接收方的**采样时钟**不是同一个.每个**字符**都要附加1位起始位和1位停止位，确定一个字符的开始和结束，另外还要附加**奇偶校验位**。

（2）**同步通信**是指发送方和接收方的采样时钟是同一个，发送方在发送数据的编码中包含时钟，接收方从数据流中提取时钟用以采样。

**6、试问光纤和铜芯有什么优势**

光纤：

带宽高、传输距离远、传输损耗小、抗干扰性好，保密性好，体积小、重量轻。
但光线端口设备价格高、易折断

**7、数据传输需要考虑的问题。**

- 任何传输介质在传输信号时都伴随着**干扰(噪声)、衰减和失真**。
- 噪声有**热噪声**和**随机噪声**两种。
- 衰减和失真都与信号的频率有关，**频率越高衰减和失真的程度越大**。
- 由于数字信号中包含着大量的**高次谐波**，  所以基带信号不适合作长距离和高速的传输。
- 尤其在电话系统中使用的是**频分多路复用**，人为地限制了每个信道的带宽。

**8、常用的传输介质有哪几种？并进行简述其特性。**

- **同轴电缆**：成本低，抗干扰性好，接入复杂。
- **双绞线**：线间干扰小，易于安装，可传输模拟信号并且也可传输数字信号，抗干扰性一般，连接距离短。
- **光缆**：带宽高，传输损耗小，抗干扰性好，保密性好，体积小重量轻，但价格较昂贵。
- **无线传输**：频率高，频带范围宽，通信信道的容量大，通讯比较稳定。

**9、试写出下列**FDM，TDM，PCM，ADSL

- **FＤＭ：频分多路复用（Frequency-division multiplexing ）**，就是将传输线路的**频带资源**划分成多个子频带，形成多个子信道。
- **TDM：时分多路复用（Time-division multiplexing）**，将传输线路的**带宽资源**按时间轮流分配给不同的用户，每个用户只在分配的时间里使用线路传输数据。
- **PCM：脉冲编码调制（****PulseCodeModulation）**，将模拟电话信号转换为数字信号。
- **ADSL：非对称数字用户线（****Asymmetric Digital Subscriber Line）**，下行即从**ISP**到用户的带宽都远远大于上行即用户到ISP的带宽，所以称为“非对称”。

> 互联网服务提供商（Internet Service Provider），简称**ISP**，指的是面向公众提供下列信息服务的经营者，中国电信、中国移动等就是ISP

**10、\**蜂窝的实际布局很少是非常规则的。即使单个蜂窝的形状也往往是不规则的。试给出一个可能的理由说明为什么要这样？这些不规则形状对每个蜂窝的频率分配有什么影响？\****

（1）一开始安装基站时，蜂窝设备被布置在人口密度大的地区，这些地区，运营商后期后不想移动它们。

（2）天线一般需要依靠较高的建筑或者山顶，由于地形及建筑物分布的不规则，所以蜂窝设备也不规则。

（3）一些社区或者财产拥有者不允许蜂窝中心坐落在他们的建筑物上。

为此，天线并没有安装在蜂窝中心。

在规则的布局下，用户在各自的蜂窝范围不会重复使用相同的频率，但在不规则的布局下，用户可能在蜂窝的**重叠区域**可能使用了相同的频率，这使得**频率分配复杂化**。

> **蜂窝网络**（英语：Cellular network），又称**移动网络**（mobile network）是一种[移动通信](https://baike.baidu.com/item/移动通信)硬件架构，分为模拟蜂窝网络和数字蜂窝网络。由于构成网络覆盖的各通信基地台的信号覆盖呈六边形，从而使整个网络像一个[蜂窝](https://baike.baidu.com/item/蜂窝/18046858)而得名。
>
> ![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211216151024389-173748267.png)
>
> 每一个蜂窝使用一组频道。如果两个蜂窝相隔足够远，则可以使用同一组频道。

**11、数****据链路层的功能**

**封装成帧、可靠（透明）传输、\**差错检查\****

数据链路层的任务是把网络层的数据组合成帧，并加上一定的校验码后交物理层，物理层用不同的信号表示二进制数据位，从而把帧用一段连续的信号串表示并传送到目的主机，也就是为源和目的主机的网络层之间提供一条可靠的数据链路

**12、 在数据传输过程中,若接收方收到的二进制比特序列为10110011010, 接受双方采用的生成多项式为G(x)=x4+x3+1，则该二进制比特序列在传输中是否出错？如果未出现差错，发送数据的比特序列和CRC检验码的比特序列分别是什么？**

**生成多项式G（x）**对应的二进制比特序列为11001。进行如下的二进制模2除法，被除数为10110011010，除数为：11001，得出余数为0**，**因此该**二进制比特序列在传输过程中没有出现差错**。

![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211217104547532-134852023.png)

（这里的除法是**异或：**不同为1，相同为0 ）

发送数据的比特序列是1011001，CRC检验码的比特序列是1010（后四位）。

**13、****假定卫星信道的数据率为100kb/s，卫星信道的单程传播时延为250ms，每个数据帧的帧长均为2000位，并且不考虑误码、确认帧长、头部和处理时间等开销，为达到传输的最大效率，试问帧的顺序号应为多少位？此时信道利用率是多少？**

往返时延：RTT=250*2=500ms=0.5s。

一帧发送时间：2000bit/100kb/s= 0.02s

一帧发送完后经过一个单程时延到达接受方，再经过一个单程时延发送方接受到应答，从而可以继续发送，故要达到传输效率最大，就是不用等确认可以继续发送帧，设窗口值为x

（2000bit*x）/100kb/s=0.02s+0.5s=0.52s

得x=26。若取得最大信道利用率，窗口值是26即可，因为在此条件下，可以不间断地发送帧，所以发送速率保持在100kb/s。由于16（24）<26<32（25）,**帧的顺序号应为5位**（取上）。

在使用后退N式ARQ的情况下，最大窗口值是31，大于26，可以不间断地发送帧，此时信道利用率是100%。

> 后退N帧ARQ协议对传统的[自动重传请求](https://baike.baidu.com/item/自动重传请求/2084571)（ARQ,Automatic Repeat reQuest）进行了改进，从而实现了在接收到ACK之前能够连续发送多个数据包。
>
> 后退N帧ARQ对发送窗口的大小是有限制的，如果帧的序号用n比特编号，则发送窗口WT应该满足：
>
> WT≤2n-1

**14、****ARQ协议要点。**

- 发送方要记录下一个**准备发送**的顺序号
- 接收方要记录下一个**期望接收**的顺序号
- 发送过程和接收过程是**严格交替**的（半双工噪声信道）
- 接收方收到一个正确的帧，即便不是期望的帧，都将发送一个确认帧ACK（即一个空的确认帧）。

> **[自动重传请求](https://baike.baidu.com/item/自动重传请求/2084571)（Automatic Repeat-reQuest，ARQ）是OSI模型中[数据链路层](https://baike.baidu.com/item/数据链路层/4329290)的错误纠正协议之一。它包括停止等待ARQ协议和[连续ARQ协议](https://baike.baidu.com/item/连续ARQ协议/3111685)，错误侦测（Error Detection）、正面确认（Positive Acknowledgment）、逾时重传（Retransmission after Timeout）与负面确认继以重传（Negative Acknowledgment and Retransmission）等机制。**

**15、****数据链路成传送的协议数据单元是什么****？****数据链路层主要解决的三个问题是什么****？请举例说明解决三个问题的方法。**

协议数据单元是**帧**，三个问题是：**封装成帧**、**差错检测**和**可靠传输**。

- **封装成帧**主要解决**帧界定**和**透明传输问题**。分别采用**字符填充法**和**比特填充法**来解决透明传输问题。
- **差错检测**主要检测比特在传输过程中可能产生的差错，主要方法有**循环冗余检验****CRC**、**海明码**等。
- **可靠传输**要保证发送端发送什么，在对应的接收端即受到什么，解决方法就是**停止等待协议**。

> **停止等待**就是每发送完一个分组就停止发送，等待对方的确认。在收到确认后再发送下一个分组。

**16、****画出1000101011101的不归零****、曼彻斯特以及差分曼彻斯特编码。**

![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211219094609220-1106936945.png)

- **不归零制(NRZ)**：正电平代表1， 负电平代表0
- **曼彻斯特编码**: 从高到低的跳变是 1，从低到高的跳变是 0
- **差分曼彻斯特编码**: 1代表没有跳变（也就是说上一个波形图在高现在继续在高开始，上一波形图在低继续在低开始）开始画0代表有跳变（也就是说上一个波形图在高位现在必须改在低开始，上一波形图在低位必须改在从高开始）

**17、****纯****ALOHA****的****原理及分时隙ALOHA****的****原理****，****并比较****。**

**纯ALOHA:**任何一个站都可以在帧生成后立即发送（可能冲突），并通过信号的反馈，检测信道，以确定发送是否成功。如发送失败，则经随机延时后再发送。（只要用户有数据要发送，就尽管让他们发送）

**分时隙ALOHA**:分隙ALOHA的时间以**时隙**为单位。时隙的长度对应一帧的传输时间，其起点由专门的信号来标志。新帧的产生是随机的，但分隙ALOHA不允许随机发送，凡帧的发送必须在时隙的起点，即冲突危险区是原来的一半。

 比较：

- 纯ALOHA中，一旦产生新帧，就立即发送，全然不顾是否有用户正在发送，所以发生冲突的可能伴随着发送的整个过程。
- 分隙ALOHA中，规定发送行为必须在时隙的开始，一旦在发送开始时没有冲突，则该帧将发送成功。

> Aloha是世界上最早的[无线电](https://baike.baidu.com/item/无线电/3979)[计算机通信网](https://baike.baidu.com/item/计算机通信网/7642504)。它是1968年[美国夏威夷大学](https://baike.baidu.com/item/美国夏威夷大学/10342017)的一项研究计划的名字。70年代初研制成功一种使用无线广播技术的[分组交换](https://baike.baidu.com/item/分组交换/1193080)计算机网络，也是最早最基本的无线[数据通信协议](https://baike.baidu.com/item/数据通信协议)。取名ALOHA，是[夏威夷人](https://baike.baidu.com/item/夏威夷人/5816619)表示致意的问候语，这项研究计划的目的是要解决[夏威夷群岛](https://baike.baidu.com/item/夏威夷群岛/958690)之间的通信问题。Aloha网络可以使分散在各岛的多个用户通过无线电信道来使用中心计算机，从而实现一点到多点的数据通信。

**18、****解释1****-****持续****CSMA****、****非****持续****CSMA****、P****-****持续****CSMA****的主要工作****原理。**

- **1-持续CSMA**: 每个站在发送前，先侦听信道，如信道正忙，则等待并持续侦听，一旦信道空闲，立即发送，即发送的概率为1；如冲突，则延时一随机时隙数后，重新发送。
- **非持续CSMA**: 每个站在发送前，先侦听信道，如信道正忙，则不再继续侦听，而是延时一随机时隙数后，再侦听信道。  
- **P-持续CSMA**: 用于分隙信道，先侦听信道，如信道正忙，则等到下一时隙；如信道空闲，则以概率P发送，而以概率q=（1-p）把本次发送延至下一时隙，直至发送成功。

> **载波监听多路访问** 全称Carrier Sense Multiple Access (CSMA)，是一种允许多 个设备在同一信道发送信号的[协议](https://baike.baidu.com/item/协议/670528)，其中的设备监听其它设备是否忙碌，只有在线路空闲时才发送。

**19、一大群ALOHA用户每秒产生50个请求，包括原始的请求和重传的请求。时间槽单位为40毫秒。试问：（1）第一次发送成功的机会是多少？（2）恰好k此冲突之后成功的概率是多少？（3）所需传输次数的期望值是多少？**

 （1）每个时间槽产生的请求数是40ms*50/s=2个。

在一个帧时内生成k帧的概率服从泊松分布：

首次发送时别人不发送的概率是P0 = e-G，所以有冲突的概率是 1-e-G。

故刚好发生k-1次冲突然后一次成功的概率是 **Pk=e-G(1-e-G)k-1**。

其中G=2，k=1即一次发送成功。所以概率为：e-2；

 （2）即k+1次成功的概率，根据公式Pk=e-G(1-e-G)k-1得0.135 ×0.865k  （ e自然常数约等于2.718 ，e-2≈ 0.135）

 （3）期望计算公式

![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211220211301893-1580672.png)

根据公式eG = 7.4。

> ![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211220204030812-633370758.png)

**20、****假设一个11Mbps的802.11LAN正在无线信道上传送一批连续的64字节帧，比特错误率为10-7，试问平均每秒钟将有多少帧被损坏？**

**每帧包含512bit**，bit错误率为10-7，所有帧都正确的概率是（1-10-7）512=0.9999488，发生帧错误的概率约为1-（1-10-7）512 = 5*10-5

每秒钟传输的帧数是11*106/512，约为21484帧。5*10-5*21484约为1，所以每秒钟大约有1帧损坏。

**21、****一个路由器可以每秒钟处理200万个数据包。提供给路由器的负载为每秒钟150万个数据包。如果从源端到接收方的路径上有10个路由器，试问路由器花在排队和服务的时间为多少？**

排队理论证明一个数据包所经历的平均延迟T=(1/μ)*(1/（1-ρ）)，ρ=λ/μ是CPU的使用率。

这里的μ是200万，λ是150万，所以ρ=λ/μ是0.75，这里是T=2μs。在一条路径上有10个路由器，排队和服务时间为20μs。

**22、请说明****D-V算法工作原理及缺点****，****L-S算法的基本思想及优缺点。**

D-V算法（距离矢量路由算法）工作原理:

- 每个路由器用两个向量Di和Si来表示**该点到网上所有节点的路径距离**及**其下一个节点**
- 相邻路由器之间交换路径信息
- 各节点根据路径信息更新路由表

缺点:

（1）交换的路径信息量大

（2）路径信息不一致

（3）收敛速度慢

（4）距离矢量中不考虑带宽因子

（5）不适合大型网络

L-S算法(链路状态算法) 基本思想:

- 发现它的邻接节点,并得到其网络地址
- 测量它到各邻接节点的延迟或开销
- 组装一个分组以告知它刚知道的所有消息
- 将这个分组发给所有其他路由器
- 计算到每个其他路由器的最短路径

优点:

（1）各路由器的路由信息的一致性好

（2）收敛性好,坏消息也一样传播的快

（3）大型网络,报文长度与网络规模关系不大

缺点:

（1）每个路由器需要有较大的存储空间

（2）计算工作量大

**23、****设某路由器建立了如下路由表：**

 

| **目的网络**        | **子网掩码**          | **下一跳** |
| ------------------- | --------------------- | ---------- |
| **128.96.39.0**     | **255.255.255.128  ** | **接口m0** |
| **128.96.39.128  ** | **255.255.255.128**   | **接口m1** |
| **128.96.40.0**     | **255.255.255.128  ** | **R2**     |
| **192.4.153.0**     | **255.255.255.192**   | **R3**     |
| ***（默认）**       | **——     **           | **R4**     |

 

 **现共收到5个分组，其目的地址分别为：**

**（1）128.96.39.10**

**（2）128.96.40.12**

**（3）128.96.40.151**

**（4）192.****4.****153.17**

**（5）192.4.153.90**

**试****分别计算****下****一跳****。( 详细****写出计算依据****)**

(1) 分组目的地址为128.93.39.10，和子网掩码255.255.255.128相与，得128.93.39.0经接口**m0**转发。

(2) 目的地址为128.96.40.12和子网掩码255.255.255.128相与，得128.96.40.0查路由表可知，分组经R2转发。

(3) 目的地址为128.96.40.151，和子网掩码255.255.255.128相与，得128.96.40.128和子网掩码255.255.255.192相与，得128.96.40.128查路由表无匹配，经默认路由R4转发。

(4) 目的地址为192.4.153.17，和子网掩码255.255.255.128相与，得192.4.153.0。目的地址192.4.153.17和子网掩码255.255.255.192相与，得192.4.153.0 查路由表可知，经R3转发。

(5) 目的地址192.4.153.90，和子网掩码255.255.255.128相与，得192.4.153.0。目的地址192.4.153.90和子网掩码255.255.255.192相与，得192.4.153.0 查路由表无匹配，经默认路由R4转发。

**24、****已知地址块中的一个地址是190.87.140.202/29。试求这个地址块中的最小地址和最大地址。地址掩码是什么？地址块中共有多少地址？相当于多少个C类地址。**

190.87.140.202/29 **前29位为网络前缀**，后3**位为主机号**

190.87.140.202/29 = 10111110 01010111 10001100 11001**010（后三位为主机号 000~111）**

最小地址为190.87.140.200（11001**000**）

最大地址为190.87.140.207（11001**111**）

子网掩码为11111111 11111111 11111111 11111000 即255.255.255.248

地址数为8 （23），相当于1/32个C类地址（**C类地址最大256个地址数**）

> **CIDR无分类域间路由选择**使用“斜线记法”，即在IP地址后面加上斜线“/”，然后写上网络前缀所占的位数（也就是子网掩码中1的个数）。这个网络前缀可以有任何长度。
>
> 每一个CIDR地址块中的地址数一定是2的整数次幂。
>
> C类地址：255.255.255.0。

**25、****假设主机A和路由器R1连接，R1又与另一个路由器R2连接，R2与主机B连接，假定一个要发给主机B的TCP消息被传递给主机A的IP代码，其中包含了900个字节的数据包和20个字节的TCP头。请写出在三条链路上传输的每个数据包中IP头部的 Total length、Identification、DF、MF、和Fragment offset字段。假定链路A-R1链路可以支持的最大帧长为1024字节，其中包括14字节的帧头；链路R1-R2可以支持的最大帧长为512字节，其中包括8字节的帧头；链路R2-B可以支持的最大帧长为512字节，其中包括12字节的帧头。**

一共传输920个字节（900数据加上20 TCP头部）因为在IP层进行封装一次，IP数据报的报头是20字节，所以**在数据链路层要传输的数据是940字节**。

在链路A-R1上，940+14=954<1024所以可以直接传输。（14字节的帧头是数据链路层的，不在IP层，算不到Total Length上）

**R1-R2链路上**

一次最多只能传输512-8=504 < 940，所以需要分片 又因为分片数据需要是8的字节倍数，Fragment offse是数据偏移 所以504-20（IP头）=484； 选做大八倍数480

R1-R2第一个数据传送：Total length 为500（480+20 IP头）；Identification为x；DF为0；MF为1；Fragment offse为0**
**

由于已经发送了480个，还剩440，440+20<504，可以直接发送

R1-R2第二个数据传送：Total length 为460（440+20 IP头）；Identification为x；DF为0；MF为0；Fragment offse为60(480/8数据报偏移位置)

**R2-B链路上**

一次最多只能传输512-12=500 <940，所以需要分片 又因为分片数据需要是8的字节倍数，Fragment offse是数据偏移，所以500-20=480； 选做大八倍数480

R2-B第一个数据传送：Total length 为500（480+20 IP头）；Identification为x；DF为0；MF为1；Fragment offse为0**
**

由于已经发送了480个，还剩440+20<504，可以直接发送

R1-R2第二个数据传送：Total length 为460（440+20 IP头）；Identification为x；DF为0；MF为0；Fragment offse为60(480/8数据报偏移位置)

A-R1:   Length = 940; ID = x; DF = 0; MF = 0; Offset = 0

R1-R2:(1) Length = 500; ID = x; DF = 0; MF = 1; Offset = 0

(2) Length = 460; ID = x; DF = 0; MF = 0; Offset = 60

R2-B: (1) Length = 500; ID = x; DF = 0; MF = 1; Offset = 0

(2) Length = 460; ID = x; DF = 0; MF = 0; Offset = 60



> **![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211218202836325-474686112.png)**
>
> total length：数据和头的**总长度**
> identification：**标识** 主要用来指明归属哪个数据报，尤其指在一个数据报中拥有多个分片的话，这多个分片都有相同的identification
>
> DF：**标志** 代表是否分段
> MF：**标志** 表示是否还在分段
> fragment offset：**片偏移** 代表数据偏移位置，除了最后一个分段外，之前的所有分段都是8字节的倍数**
> **

**26、****一台主机在一条线路上发送1500 字节的TCP 有效载荷，最大数据包生存期为120 秒，要想不让序号回绕，试问该线路的最快速度为多少？要考虑TCP 、IP 和以太网的开销。假设可以连续发送以太网帧。**

TCP序号位为32bit，基于字节流，则120s内能发出的最大字节数 232（4G） ，在1s内最多发送字节数 232/120= 35791394 字节；已知TCP净荷部分为1500字节，需进行分片，被分为 35791394 /1500 = 23861个报文，而每个报文长度（计算开销） = 1500（TCP数据部分） + 20（TCP首部） + 20（IP首部） + 26（6 目标mac地址+6 源mac地址+2 类型+4 FCS+8 以太网首部） = 1566 字节，因此最快速度 = 1566 × 8(bit) × 23861 = 299 Mbps。

> 一个tcp流的初始序列号（ISN）并不是从0开始的，而是采用一定的随机算法产生的，因此ISN可能很大（比如(2^32-10)），因此同一个tcp流的seq号可能会回绕到0。而我们tcp对于丢包和乱序等问题的判断都是依赖于序列号大小比较的。此时就出现了所谓的tcp序列号回绕（sequence wraparound）问题。
>
> ![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211218195015785-788540972.png)
>
> ![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211218195015810-415088237.png)

**27、****简述TCP****提供的服务**

（1）**面向连接** 传输数据前需要先建立连接，数据传输完毕要释放连接 。

（2）**端到端的服务**

（3）**完全可靠性服务** 确保传输数据的正确性，不出现丢失或乱序 。

（4）**全双工服务**

（5）**流接口** （采用字节流方式 ，即以字节为单位传输字节序弄。如果字节流太长，将其分段 。）

**28、我们已知TCP有三次握手过程，****为什么要三次握手
**三次握手的目的是建立**可靠的通信信道**，**双方确认自己与对方的发送和接受是正常的**。**
**

第一次握手：客户端发送网络包，服务端收到了。这样服务端就能得出结论：客户端的发送能力、服务端的接收能力是正常的。
第二次握手：服务端发包，客户端收到了。这样客户端就能得出结论：服务端的接收、发送能力，客户端的接收、发送能力是正常的。不过此时服务器并不能确认客户端的接收能力是否正常。
第三次握手：客户端发包，服务端收到了。这样服务端就能得出结论：客户端的接收、发送能力正常，服务器自己的发送、接收能力也正常。
因此，需要三次握手才能确认双方的接收与发送能力是否正常。

>    1、第一次握手：客户端给服务器发送一个 SYN 报文。
>    2、第二次握手：服务器收到 SYN 报文之后，会应答一个 SYN+ACK 报文。
>    3、第三次握手：客户端收到 SYN+ACK 报文之后，会回应一个 ACK 报文。
>    4、服务器收到 ACK 报文之后，三次握手建立完成。
>
> ![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211219191208189-1400687346.png)

**29、****设TCP的ssthresh的初始值为8，（单位为报文段），当拥塞窗口上升到12时网络发生了超时，TCP使用慢开始和拥塞避免。试分别求出第1个轮次、第5个轮次和第9个轮次传输的各拥塞窗口大小。**

拥塞窗口分别为：1，2，4，8，9，10，11，12，1，2，4，6，7，8，9

| **cwnd** | 1    | 2    | 4    | 8    | 9    | 10   | **11 ** | **12 ** | **1 ** | **2** | 3    |
| -------- | ---- | ---- | ---- | ---- | ---- | ---- | ------- | ------- | ------ | ----- | ---- |
| n        | 1    | 2    | 3    | 4    | 5    | 6    | 7       | 8       | 9      | 10    | 11   |

 

第1轮次是：1 拥塞窗口的初始值为1。

第5轮次是：9 到慢开始门限值ssthresh之前是指数增加，超过ssthresh后，拥塞窗 口按线性规律增长。

第9轮次是：1 出现拥塞后，更新后的ssthresh变为发生拥塞窗口数值的一半，拥塞窗口再设置为1

**30、****TCP的拥塞窗口cwnd大小与传输轮次n的关系如下****表****所示：**

| **cwnd** | 1     | 2     | 4     | 8     | 16    | 32    | **33** | **34** | **35** | **36** | **37** | **38** | **39** |
| -------- | ----- | ----- | ----- | ----- | ----- | ----- | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| **n**    | **1** | **2** | **3** | **4** | **5** | **6** | **7**  | **8**  | **9**  | **10** | **11** | **12** | **13** |

 

| **cwnd** | **40** | **41** | **42** | **21** | **22** | **23** | **24** | **25** | **26** | **1**  | **2**  | **4**  | **8**  |
| -------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| **n**    | **14** | **15** | **16** | **17** | **18** | **19** | **20** | **21** | **22** | **23** | **24** | **25** | **26** |

**![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211218210002131-1967562581.png)**

**指明TCP工作在慢开始阶段的时间间隔。**

[1,6]和[23,26]

**指明TCP工作在拥塞避免阶段的时间间隔。**

[6,16]和[17,22]

**在第16轮次和第22轮次之后发送方是通过收到三个重复的确认还是通过超时检测到丢失了报文段？**

在第16轮次之后发送方通过接受三个重复的确认，检测到丢失了报文段，因为题目给出，下一个轮次的拥塞窗口减半了。

在第22轮次之后发送方是通过超时检测到丢失了报文段，因为题目给出，下一个轮次的拥塞窗口下降到1了。

**在第1轮次，第18轮次和第24轮次发送时，门限ssthresh分别被设置为多大？**

在第 1 轮次发送时，门限 ssthresh 被设置为 32，因为从第 6 轮次起就进入了拥塞避免状态，拥塞窗口每个轮次加 1。

在第 18 轮次发送时，门限 ssthresh 被设置为发生拥塞时拥塞窗口 42 的一半，即 21。

在第 24 轮次发送时，门限 ssthresh 被设置为发生拥塞时拥塞窗口 26 的一半，即 13。

**在第几轮次发送出第70个报文段？**

第 1 轮次发送报文段 1。（cwnd = 1）

第 2 轮次发送报文段 2， 3。（cwnd = 2）

第 3 轮次发送报文段 4 ~ 7。（cwnd = 4）

第 4 轮次发送报文段 8 ~ 15。（cwnd = 8）

第 5 轮次发送报文段 16 ~ 31。（cwnd = 16）

第 6 轮次发送报文段 32 ~ 63。（cwnd = 32）

第 7 轮次发送报文段 64 ~ 96。（cwnd = 33）

因此第 70 报文段在第 7 轮次发送出。

**假定在第26轮次之后收到了三个重复的确认，因而检测出了报文段的丢失，那么拥塞窗口cwnd和门限ssthresh应设置为多大？**

检测出了报文段的丢失时拥塞窗口 cwnd 是 8，因此拥塞窗口 cwnd 的数值应当减半，等于 4，而门限 ssthresh 应设置为检测出报文段丢失时的拥塞窗口 8 的一半，即 4。

> 拥塞控制术语
>
> ① 慢开始：
> 在主机刚刚开始发送报文段时可先将拥塞窗口 cwnd 设置为一个最大报文段 MSS 的数值。在每收到一个对新的报文段的确认后，将拥塞窗口增加至多一个 MSS 的数值。用这样的方法逐步增大发送端的拥塞窗口 cwnd，可以分组注入到网络的速率更加合理。
> ② 拥塞避免：
> 当拥塞窗口值大于慢开始门限时，停止使用慢开始算法而改用拥塞避免算法。拥塞避免算法使发送的拥塞窗口每经过一个往返时延 RTT 就增加一个 MSS 的大小。
> ③ 快重传算法规定：
> 发送端只要一连收到三个重复的 ACK 即可断定有分组丢失了，就应该立即重传丢手的报文段而不必继续等待为该报文段设置的重传计时器的超时。
> ④ 快恢复算法：
> 当发送端收到连续三个重复的 ACK 时，就重新设置慢开始门限 ssthresh 与慢开始不同之处是拥塞窗口 cwnd 不是设置为 1，而是设置为 ssthresh 若收到的重复的 ACK 为 n 个（n>3），则将 cwnd 设置为 ssthresh 若发送窗口值还容许发送报文段，就按拥塞避免算法继续发送报文段。若收到了确认新的报文段的 ACK，就将 cwnd 缩小到 ssthresh。
> ⑤ 乘法减小：
> 是指不论在慢开始阶段还是拥塞避免阶段，只要出现一次超时（即出现一次网络拥塞），就把慢开始门限值 ssthresh 设置为当前的拥塞窗口值乘以 0.5。当网络频繁出现拥塞时，ssthresh 值就下降得很快，以大大减少注入到网络中的分组数。
> ⑥ 加法增大：
> 是指执行拥塞避免算法后，在收到对所有报文段的确认后（即经过一个往返时间），就把拥塞窗口 cwnd 增加一个 MSS 大小，使拥塞窗口缓慢增大，以防止网络过早出现拥塞。

**31、****网络管理的要求****以及****功能****？**

要求：  

- 同时具有**网络监视**和**控制**两方面的能力
- 能够管理所有层次的协议
- 可管理的范围尽可能大
- 系统开销尽可能的小
- 可管理不同厂家的设备

功能：  

- **故障**管理：故障检测、故障定位、故障报告；
- **配置**管理：识别网上的设备和用户，维护网上软硬件和电路的精确清单；
- **性能**管理：资源利用率分析。
- **计费**管理：对用户使用的各种资源进行跟踪，统计时间；
- **安全**管理：用户授权，控制网上用户只能访问自己权限内的资源。

**32、****cs.sjtu.edu.cn****如何****通过域名解析器解析出****cs.tsinghua.****edu.cn****的IP地址，****以及如何****优化****根服务器太忙的问题。**

 ![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211217104827085-685932536.png)

> 中国教育和科研计算机网CERNET
>
> 中国教育和科研计算机网CERNET是由国家投资建设，教育部负责管理，清华大学等高等学校承担建设和管理运行的全国性学术计算机互联网络。它主要面向教育和科研单位，是全国最大的公益性互联网络。
>
> 　 CERNET分四级管理，分别是全国网络中心；地区网络中心和地区主结点；省教育科研网；校园网。CERNET全国网络中心设在清华大学，负责全国主干网的运行管理。地区网络中心和地区主结点分别设在清华大学、北京大学、北京邮电大学、上海交通大学、西安交通大学、华中科技大学、华南理工大学、电子科技大学、东南大学、东北大学等10所高校，负责地区网的运行管理和规划建设。

优化根服务器太忙：

- 通过**复制**：每个根服务器被复制许多份，存于整个世界，实际使用时，找物理上最近的服务器。
- 通过**缓存**：每个服务器都保存一个域名缓存，当查找一个新的服务器时，DNS将它的副本存于缓存中，在收到一个域名解析请求时，服务器先查找缓存。

**33、****当****点击****http://www.cs.sjtu.edu.cn/welcome.html时****Web****访问****过程。**

（1）浏览器分析超链接指向页面的URL

（2）浏览器向**DNS**请求解析www.cs.sjtu.edu.cn的IP地址

（3）DNS解析出服务器的IP地址为202.120.1.154

（4）浏览器与服务器建立TCP连接（202.120.1.154使用端口80）

（5）浏览器发出取文件命令：**get**/welcome.html

（6）服务器响应，将文件welcome.html发给浏览器

（7）tcp连接释放

（8）浏览器显示文件welcome.html中的所有文本

（9）浏览器显示文件welcome.html中的所有图像

> **域名系统**（英文：**D**omain **N**ame **S**ystem，缩写：**DNS**）是互联网的一项服务。它作为将**域名**和**IP地址**相互**映射**的一个**分布式数据库**，能够使人更方便地访问互联网。

**34、****简述****建立电话连接的过程****。**

（1）PC发送Q.931的连接消息，指出与哪个电话通话，通过gatekeeper（网关管理员）送到gateway（网关）

（2）gateway发出一个普通的电话呼叫

（3）PSTN本地局向被叫电话发出振铃信号，并用Q.931 ALERT消息告诉PC振铃开始

（4）当被叫电话摘机时，局部发回一个Q.931的connect消息，通知PC连接已建

>  Q.931，作为[电信](https://baike.baidu.com/item/电信/150753)体系的[网络层](https://baike.baidu.com/item/网络层/4329439)协议，主要为[ISDN ](https://baike.baidu.com/item/ISDN )提供两设备间关于[逻辑网络](https://baike.baidu.com/item/逻辑网络/5075851)连接的呼叫建立、维护和终止等操作。Q.931是[电信](https://baike.baidu.com/item/电信)体系[网络层](https://baike.baidu.com/item/网络层)（第三层）协议之一，由ITU Q 系列Q.930 文件详细说明。
>
> PSTN ( Public Switched Telephone Network )定义：**公共交换电话网络**，一种常用旧式电话系统。即我们日常生活中常用的电话网。工作原理 公共交换电话网络是一种全球语音通信[电路交换网络](https://baike.baidu.com/item/电路交换网络)，包括商业的和政府拥有的。

**35、****Bluetooth****系统****的基本组成单元****Piconet的****概念？**

（1）一个Piconet中只有一个主机，最多可有255个从机，但同时只允许有7个从机是active状态，其余的都处于parked状态。

（2）一个Piconet是以主机为中心的半径为10m的空间范围

（3）parked状态是除了能接受主机的呼叫并应答之外不能做其他的任何操作

（4）Piconet的核心是一个**TDM系统**（时分复用），由主机控制时钟并决定哪一个从机在哪一个时隙内得到通信权限

（5）从机只能与主机通信，从机与从机之间不允许通信

（6）Bluetooth系统的一个重要考虑是**系统实现成本**，包括芯片成本、系统功耗、处理开销等

> Piconet 是指用蓝牙(Blue tooth)技术把小范围(10-100m)内装有蓝牙单元(即在支持[蓝牙技术](https://baike.baidu.com/item/蓝牙技术/202281)的各种电器设备中嵌入的蓝牙模块)的各种电器组成的微型网络，俗称微微网。
>
> TDM 时分复用技术（time-division multiplexing, TDM）是将不同的信号相互交织在不同的时间段内，沿着同一个信道传输；在接收端再用某种方法，将各个时间段内的信号提取出来还原成原始信号的通信技术。这种技术可以在同一个信道上传输多路信号

**36、****系统互联的含义是什么？请举例哪些设备使用系统互联技术。其中比较成熟的技术是Bluetooth，解释一下什么是Bluetooth。**

系统互联：使用**数字无线协议**，实现**固定**或**移动**数字设备之间无线的数据传输。

例如：键盘、鼠标

Bluetooth：采用**低成本**的无线广播技术，用于互联计算和通信设备之间，并具有**小范围**、**低功耗**特点的无线标准。在覆盖范围上与无线LAN标准802.11有重叠。

Bluetooth有从物理层到应用层完整的协议栈。

**37、****简述什么****是无线局域网的****隐藏****站点和暴露站点****，****如何解决这****两个****问题。**

隐藏终端是指在接收接点的覆盖范围内而在发送节点的覆盖范围外的节点。隐藏终端由于听不到发送节点的发送而可能向相同的接收节点发送分组，导致分组在接收 节点处冲突。冲突后发送节点要重传冲突的分组，这降低了信道的利用率。

当C正在向B发送报文，A也希望向B发送，由于A在C的信号范围之外，没有检测到C的信号，于是就发送，可能造成在B点处A和C的信号冲突。

 ![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211217124623804-123463801.png)

暴露终端是指在发送接点的覆盖范围内而在接收节点的覆盖范围外的节点。暴露终端因听到发送节点的发送而可能延迟发送。但是，它其实是在接收节点的通信范围之外，它的发送不会造成冲突。这就引入了不必要的时延。

当A正在向D发送报文，B也希望向C发送，由于B在A的信号范围之内，检测到信道正被使用，于是就不发送，其实B向C发送是允许的。 

 ![img](https://img2020.cnblogs.com/blog/1358881/202112/1358881-20211217124648606-621702217.png)

解决办法：

- 一种是接收节点在接收的同时发送忙音来通知邻居节点，即BTMA系列；
- 另一种方法是发送节点在数据发送前与接收节点进行一次短控消握手交换，以短消息的方式通知邻居节点它即将进行接收，即RTS/CTS方式。

> 忙音多路访问（**BTMA**)协议是指为解决暴露站点的问题而设计的。
>
> [RS232](https://baike.baidu.com/item/RS232)标准中的**RTS与CTS**：即请求发送/清除发送，用于[半双工](https://baike.baidu.com/item/半双工)时的收发切换，属于[辅助](https://baike.baidu.com/item/辅助/1045139)流控信号。

**38、****802.11****定义了9项****服务，其中****5项****为分布式服务，****用于****管理蜂窝内的成员以及不同蜂窝成员之间的交互工作，另外****4项****为站点安全可靠服务，用户单个蜂窝内的工作。请****解释每项站点服务（认证****、****撤销认证****、保密、数据的递交****）的****具体含义。**

- **认证**：为提高通信的安全性，该项服务提供身份认证机制，当移动主机进入某个蜂窝并与基站关联后，当移动主机进入某个蜂窝并与基站关联后，基站便向移动主机发出一个特殊的查询帧，通过核对已分配给移动主机的密钥（或password）来确认该移动主机的合法性，并最终统一该主机在蜂窝注册。
- **撤销认证**：当已被认证的移动主机要离开网络时，必须撤销认证，不再允许使用原网络。
- **保密**： 处理信息的加密与解密，采用RC4加密算法。
- **数据的递交**：802.11不提供100%的可靠性保证，当需要经过Ethernet通信时，Ethernet也不提供100%的可靠性保证，所以必须由高层协议来负责检查和校正差错，以保证最终数据递交的正确性。

**39、AES高级加密标准有哪些要求**

- 对称块加密
- 设计是公开的
- 必须支持128、192和256三种密钥长度
- 必须可以用软件和硬件实现
- 算法必须是公开的，对所有人一视同仁

> 密码学中的高级加密标准（Advanced Encryption Standard，AES），又称Rijndael[加密法](https://baike.baidu.com/item/加密法/9684302)，是[美国联邦政府](https://baike.baidu.com/item/美国联邦政府/8370227)采用的一种区块加密标准。
>
> 用来替代DES标准，从世界范围内征求方案。

**40、请写出L2CAP子层的主要功能**

- 从上层来的数据包（分组）最大可达64kb，为了传输，很可能必须拆分并组成较小的帧。而在另一端，又必须重组成数据分组。
- 多数据源通常都由多路分配器来分时处理，如一个分组到达目的端后需重组，则L2CAP必须根据其上层协议进行重组，如RFcomm（串行端口协议）与Telephony（电话协议）是不同的。
- 在主、从双方建立链路和正常操作期间，协商设定允许的最大负载大小，以保证小分组设备的处理能力的同时，尽可能少浪费大分组设备的处理能力。

> L2CAP，Logical Link Control and Adaptation Protocol，即逻辑链路控制和适配协议，是蓝牙系统中的数据链路层协议
>
> 主要作用是对下层的传输屏蔽上层协议细节